{"ast":null,"code":"var _jsxFileName = \"/Users/chief/Projects and Codes/566 Final Project/frontend/src/components/Canvas.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect, useState } from 'react';\nimport './Canvas.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Canvas({\n  image,\n  edgeImage,\n  onRegionSelect,\n  selectedRegion\n}) {\n  _s();\n  const canvasRef = useRef(null);\n  const [isSelecting, setIsSelecting] = useState(false);\n  const [startPoint, setStartPoint] = useState(null);\n  const [currentPoint, setCurrentPoint] = useState(null);\n\n  // Draw image on canvas\n  useEffect(() => {\n    if (!image) return;\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    const img = new Image();\n    img.onload = () => {\n      // Resize canvas to fit image\n      const maxWidth = 800;\n      const maxHeight = 600;\n      let width = img.width;\n      let height = img.height;\n      if (width > maxWidth) {\n        height *= maxWidth / width;\n        width = maxWidth;\n      }\n      if (height > maxHeight) {\n        width *= maxHeight / height;\n        height = maxHeight;\n      }\n      canvas.width = width;\n      canvas.height = height;\n      ctx.drawImage(img, 0, 0, width, height);\n\n      // Draw selected region if exists\n      if (selectedRegion) {\n        drawSelection(ctx, selectedRegion);\n      }\n    };\n    img.src = image;\n  }, [image, selectedRegion]);\n  const drawSelection = (ctx, region) => {\n    ctx.strokeStyle = '#667eea';\n    ctx.lineWidth = 3;\n    ctx.setLineDash([5, 5]);\n    ctx.strokeRect(region.x, region.y, region.width, region.height);\n    ctx.setLineDash([]);\n  };\n  const handleMouseDown = e => {\n    const canvas = canvasRef.current;\n    const rect = canvas.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n    setIsSelecting(true);\n    setStartPoint({\n      x,\n      y\n    });\n    setCurrentPoint({\n      x,\n      y\n    });\n  };\n  const handleMouseMove = e => {\n    if (!isSelecting) return;\n    const canvas = canvasRef.current;\n    const rect = canvas.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n    setCurrentPoint({\n      x,\n      y\n    });\n\n    // Redraw\n    const ctx = canvas.getContext('2d');\n    const img = new Image();\n    img.onload = () => {\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n\n      // Draw selection\n      ctx.strokeStyle = '#667eea';\n      ctx.lineWidth = 3;\n      ctx.setLineDash([5, 5]);\n      ctx.strokeRect(startPoint.x, startPoint.y, x - startPoint.x, y - startPoint.y);\n      ctx.setLineDash([]);\n    };\n    img.src = image;\n  };\n  const handleMouseUp = e => {\n    if (!isSelecting) return;\n    const canvas = canvasRef.current;\n    const rect = canvas.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n    setIsSelecting(false);\n    const region = {\n      x: Math.min(startPoint.x, x),\n      y: Math.min(startPoint.y, y),\n      width: Math.abs(x - startPoint.x),\n      height: Math.abs(y - startPoint.y)\n    };\n    if (region.width > 10 && region.height > 10) {\n      onRegionSelect(region);\n    }\n    setStartPoint(null);\n    setCurrentPoint(null);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"canvas-container\",\n    children: image ? /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      className: \"main-canvas\",\n      onMouseDown: handleMouseDown,\n      onMouseMove: handleMouseMove,\n      onMouseUp: handleMouseUp\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"canvas-placeholder\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Upload an image to get started\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 123,\n    columnNumber: 5\n  }, this);\n}\n_s(Canvas, \"6LGJ6KCCtBhhNBDtcQNpPcSfA9g=\");\n_c = Canvas;\nexport default Canvas;\nvar _c;\n$RefreshReg$(_c, \"Canvas\");","map":{"version":3,"names":["React","useRef","useEffect","useState","jsxDEV","_jsxDEV","Canvas","image","edgeImage","onRegionSelect","selectedRegion","_s","canvasRef","isSelecting","setIsSelecting","startPoint","setStartPoint","currentPoint","setCurrentPoint","canvas","current","ctx","getContext","img","Image","onload","maxWidth","maxHeight","width","height","drawImage","drawSelection","src","region","strokeStyle","lineWidth","setLineDash","strokeRect","x","y","handleMouseDown","e","rect","getBoundingClientRect","clientX","left","clientY","top","handleMouseMove","clearRect","handleMouseUp","Math","min","abs","className","children","ref","onMouseDown","onMouseMove","onMouseUp","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/chief/Projects and Codes/566 Final Project/frontend/src/components/Canvas.js"],"sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\nimport './Canvas.css';\n\nfunction Canvas({ image, edgeImage, onRegionSelect, selectedRegion }) {\n  const canvasRef = useRef(null);\n  const [isSelecting, setIsSelecting] = useState(false);\n  const [startPoint, setStartPoint] = useState(null);\n  const [currentPoint, setCurrentPoint] = useState(null);\n\n  // Draw image on canvas\n  useEffect(() => {\n    if (!image) return;\n\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n\n    const img = new Image();\n    img.onload = () => {\n      // Resize canvas to fit image\n      const maxWidth = 800;\n      const maxHeight = 600;\n      let width = img.width;\n      let height = img.height;\n\n      if (width > maxWidth) {\n        height *= maxWidth / width;\n        width = maxWidth;\n      }\n      if (height > maxHeight) {\n        width *= maxHeight / height;\n        height = maxHeight;\n      }\n\n      canvas.width = width;\n      canvas.height = height;\n      ctx.drawImage(img, 0, 0, width, height);\n\n      // Draw selected region if exists\n      if (selectedRegion) {\n        drawSelection(ctx, selectedRegion);\n      }\n    };\n    img.src = image;\n  }, [image, selectedRegion]);\n\n  const drawSelection = (ctx, region) => {\n    ctx.strokeStyle = '#667eea';\n    ctx.lineWidth = 3;\n    ctx.setLineDash([5, 5]);\n    ctx.strokeRect(region.x, region.y, region.width, region.height);\n    ctx.setLineDash([]);\n  };\n\n  const handleMouseDown = (e) => {\n    const canvas = canvasRef.current;\n    const rect = canvas.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n\n    setIsSelecting(true);\n    setStartPoint({ x, y });\n    setCurrentPoint({ x, y });\n  };\n\n  const handleMouseMove = (e) => {\n    if (!isSelecting) return;\n\n    const canvas = canvasRef.current;\n    const rect = canvas.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n\n    setCurrentPoint({ x, y });\n\n    // Redraw\n    const ctx = canvas.getContext('2d');\n    const img = new Image();\n    img.onload = () => {\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n\n      // Draw selection\n      ctx.strokeStyle = '#667eea';\n      ctx.lineWidth = 3;\n      ctx.setLineDash([5, 5]);\n      ctx.strokeRect(\n        startPoint.x,\n        startPoint.y,\n        x - startPoint.x,\n        y - startPoint.y\n      );\n      ctx.setLineDash([]);\n    };\n    img.src = image;\n  };\n\n  const handleMouseUp = (e) => {\n    if (!isSelecting) return;\n\n    const canvas = canvasRef.current;\n    const rect = canvas.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n\n    setIsSelecting(false);\n\n    const region = {\n      x: Math.min(startPoint.x, x),\n      y: Math.min(startPoint.y, y),\n      width: Math.abs(x - startPoint.x),\n      height: Math.abs(y - startPoint.y),\n    };\n\n    if (region.width > 10 && region.height > 10) {\n      onRegionSelect(region);\n    }\n\n    setStartPoint(null);\n    setCurrentPoint(null);\n  };\n\n  return (\n    <div className=\"canvas-container\">\n      {image ? (\n        <canvas\n          ref={canvasRef}\n          className=\"main-canvas\"\n          onMouseDown={handleMouseDown}\n          onMouseMove={handleMouseMove}\n          onMouseUp={handleMouseUp}\n        />\n      ) : (\n        <div className=\"canvas-placeholder\">\n          <p>Upload an image to get started</p>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default Canvas;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}